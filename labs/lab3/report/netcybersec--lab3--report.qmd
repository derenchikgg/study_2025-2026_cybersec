---
## Author
author:
  - name: Панченко Денис 1132229056
  - name: Савурская Полина 1132222827
  - name: Кочарян Никита 1132221541
  - name: Норсоян Шушаник 1132221545
  - name: Сухальская Ксения 1132229052
  - name: Умярова Камилла 1132229051

## Title
title: "Лабораторная работа 3"
subtitle: "Защита интеграционной платформы"
---

# Цель работы

Конкуренты решили нанести репутационный вред деятельности компании и для этого нашли исполнителя.Злоумышленник находит в Интернете сайт соответствующей организации и решает провести атаку на него с целью получения доступа к внутренним ресурсам. Нужно защитить компанию от атаки.

# Выполнение лабораторной работы

## Уязвимость Bitrix vote RCE и последствие Bitrix deface

При входе на сайт компании, видим, что сайт взломан ([рис. @fig-001]).

![Взломанный сайт компании](image/1.png){#fig-001 width=90%}

Подключаемся к серверу Bitrix через SSH ([рис. @fig-002]).

![Подключение к серверу Bitrix](image/2.png){#fig-002 width=90%}

Закрываем локальное повышение привилегий, удалив файл apache_restart ([рис. @fig-003 - @fig-004]).

![Закрытие локального повышения привилегий](image/3.png){#fig-003 width=90%}

![Закрытие локального повышения привилегий](image/4.png){#fig-004 width=90%}

Для закрытия уязвимости создаем файл .htaccess в директории, отклоняющий все запросы к директории vote ([рис. @fig-005]).

![Создание файла .htaccess](image/5.png){#fig-005 width=90%}

Закрываем все вредоносные сессии ([рис. @fig-006]).

![закрытие вредоносных сессий](image/6.png){#fig-006 width=90%}

Сбрасываем пароль администратора при помощи специального скрипта ([рис. @fig-007 - @fig-008]).

![Скрипт](image/7.png){#fig-007 width=90%}

![Выполнение скрипта](image/8.png){#fig-008 width=90%}

Восстанавливаем сайт из бэкапа ([рис. @fig-009 - @fig-010]).

![Бэкап](image/9.png){#fig-009 width=90%}

![Восстановление сайта из бэкапа](image/10.png){#fig-010 width=90%}

Сайт воостановлен ([рис. @fig-011]).

![Восстановленный сайт компании](image/11.png){#fig-011 width=90%}

Уязвимость и последствие успешно устранены ([рис. @fig-012]).

![Устранение уязвимости и последствия](image/12.png){#fig-012 width=90%}

## Уязвимость GitLab RCE и последствие GitLab meterpreter

Подключаемся к серверу GitLab ([рис. @fig-013]).

![Подключение к серверу GitLab](image/13.png){#fig-013 width=90%}

С локального ПК отправляем нужное обновление на сервер ([рис. @fig-014]).

![Отправка обновления](image/14.png){#fig-014 width=90%}

Усстанавливаем обновление на сервер ([рис. @fig-015 - @fig-016]).

![Установка обновления](image/15.png){#fig-015 width=90%}

![Обновление установлено](image/16.png){#fig-016 width=90%}

Завершаем все активные вредоносные сессии ([рис. @fig-017 - @fig-018]).

![Поиск вредоносных сессий](image/17.png){#fig-017 width=90%}

![Завершение вредоносных сессий](image/18.png){#fig-018 width=90%}

Уязвимость и последствие успешно устранены ([рис. @fig-019]).

![Устранение уязвимости и последствия](image/19.png){#fig-019 width=90%}

## Уязвимость WSO2 API-Manager RCE и последствие WSO2 User web

Подключаемся к WSO2 API-Manager ([рис. @fig-020]).

![Подключение к серверу](image/20.png){#fig-020 width=90%}

Для устранения уязвимости добавляем проверку уязвимого маршрута в конфигурационный файл deployment.toml ([рис. @fig-020]).

![Добавление проверки в конфигурационный файл](image/21.png){#fig-021 width=90%}

Удаляем все эксплойты и полезные нагрузки с сервера ([рис. @fig-022]).

![Удаление вредоносных файлов](image/22.png){#fig-022 width=90%}

Подключаемся к веб-интерфейсу ([рис. @fig-022]).

![Подключение к веб-интерфейсу](image/23.png){#fig-023 width=90%}

Удаляем вредоносного пользователя веб-интерфейса ([рис. @fig-024]).

![Удаление вредоносного пользователя](image/24.png){#fig-024 width=90%}

Уязвимость и последствие успешно устранены ([рис. @fig-025]).

![Устранение уязвимости и последствия](image/25.png){#fig-025 width=90%}

# Выводы

В результате выполнения работы мы успешно устранили все уязвимости и их последствия ([рис. @fig-026]).

![Успешное устранение всех уязвимостей и последствий](image/26.png){#fig-026 width=90%}